import{V,a0 as S,a1 as T,a2 as A,g as o,a3 as v,a4 as I,L as g,a5 as W,a6 as E,a7 as M,a8 as B,a9 as U,aa as H,ab as z,ac as D,f as N,a as y}from"./vendor.a37b5c2e.js";import{a4 as O,a5 as R,a6 as $,a7 as F,k as P,a8 as q,t as G,a9 as h,a1 as j,B as J,J as K,D as f}from"./index.1214c4b5.js";import{D as p}from"./DocsSection.ca38faa0.js";const Y="v-linter__problem",Z="v-linter__issue-icon",k="data-issue-id";function m(e){return typeof e=="function"?e():e}function Q(e,s){const{level:l="warning"}=s,t=document.createElement("div"),n=m(s.message);return t.className=`${Z} ${l}-scope`,t.setAttribute(k,s.id),typeof n=="string"&&(t.title=n),t}function X(e,s){const l=[],t=s.map(i=>new i(e).scan().getResults()).flat();t.forEach(i=>{const{level:c="warning",icon:u}=i,a=m(i.message);l.push(v.inline(i.from,i.to,{class:`${Y} ${c}-scope`,"data-issue-id":i.id,title:typeof a=="string"?a:void 0})),u&&l.push(v.widget(i.from,r=>Q(r,i)))});const n=I.create(e,l);return{issues:t,decorationSet:n}}const ee=O(e=>{function s(l,t,n){const i=m(t.message),c=e.vui.setting("containedVariant"),u=e.vui.setting(`${t.level}Scope`);return e.vui.menu({activator:n,content:a=>o("div",{class:"v-linter__issue-menu__body"},[o("div",{class:["v-linter__issue-menu__message",`${u}-scope ${c}`]},[i]),t.fix.length&&o("div",{class:"v-linter__issue-menu__fixers"},[t.fix.map((r,d)=>o("div",{key:d,class:"v-linter__issue-menu__fixer"},[o("button",{type:"button",class:"v-linter__issue-menu__fixer__button",onClick:()=>{a.close(),r.handler(l,t)}},[o("span",{class:"v-linter__issue-menu__fixer__button__message"},[m(r.message)])])]))])])})}return V.create({name:"linter",addOptions(){return{plugins:[]}},addStorage(){return{issues:[]}},addProseMirrorPlugins(){const{plugins:l}=this.options,{storage:t}=this,n=a=>{const{issues:r,decorationSet:d}=X(a,l);return t.issues=r,d},i=a=>t.issues.find(r=>r.id===a),c=a=>{if(!a||!(a instanceof HTMLElement))return;const r=a.getAttribute(k),d=r&&i(r);if(!!d)return{issue:d}},u=new S({key:new T("linter"),state:{init(a,{doc:r}){return n(r)},apply(a,r){return a.docChanged?n(a.doc):r}},props:{decorations(a){return u.getState(a)},handleClick(a,r,d){const w=c(d.target);if(!w)return!1;const{issue:x}=w,{from:L,to:C}=x;return(()=>a.dispatch(a.state.tr.setSelection(A.create(a.state.doc,L,C)).scrollIntoView()))(),s(a,x,d),!0}}});return[u]}})});class te{constructor(s){this.results=[],this.doc=s}record(s){const{fix:l=[],icon:t=!1}=s;this.results.push({level:"error",id:R(),...s,fix:Array.isArray(l)?l:[l],icon:t})}scan(){return this}getResults(){return this.results}}function oe(e){const s=new RegExp(`\\b(${e.join("|")})\\b`);return class extends te{scan(){return this.doc.descendants((t,n)=>{if(!t.isText)return;const i=s.exec(t.text);if(i){const c=i[0]+"!!!!!";this.record({level:"warning",message:`Try not to say '${i[0]}'`,from:n+i.index,to:n+i.index+i[0].length,fix:[{message:()=>o("span",null,[o("code",null,[c]),g("\u306B\u4FEE\u6B63\u3059\u308B\u3002")]),handler:()=>{console.log("hoge")}},{message:"\u3069\u3046\u306B\u304B\u3059\u308B",handler:()=>{console.log("hoge")}}]})}}),this}}}const se=(e,s)=>({key:"bulletList",icon:e.icon("editorformatListBulleted"),active:({editor:t})=>t.isActive("bulletList"),onClick:({editor:t})=>{t.chain().focus().toggleBulletList().run()},floating:!0,extensions:[W.configure(s)]}),ne=(e,s)=>({key:"formatBold",icon:e.icon("editorformatBold"),active:({editor:t})=>t.isActive("bold"),onClick:({editor:t})=>{t.chain().focus().toggleBold().run()},floating:!0,extensions:[E.configure(s)]}),ie=(e,s)=>({key:"formatItalic",icon:e.icon("editorformatItalic"),active:({editor:t})=>t.isActive("italic"),onClick:({editor:t})=>{t.chain().focus().toggleItalic().run()},floating:!0,extensions:[M.configure(s)]}),le=(e,s)=>({key:"formatUnderline",icon:e.icon("editorformatUnderline"),active:({editor:t})=>t.isActive("underline"),onClick:({editor:t})=>{t.chain().focus().toggleUnderline().run()},floating:!0,extensions:[B.configure(s)]}),ae=(e,s)=>{const l={key:"history-undo",icon:e.icon("editorUndo"),disabled:({editor:n})=>!n.can().undo(),onClick:({editor:n})=>{n.chain().focus().undo().run()},extensions:[U.configure(s)]},t={key:"history-redo",icon:e.icon("editorRedo"),disabled:({editor:n})=>!n.can().redo(),onClick:({editor:n})=>{n.chain().focus().redo().run()}};return[l,t]},re=(e,s)=>({key:"link",icon:e.icon("editorLink"),active:({editor:t})=>t.isActive("link"),onClick:async({vui:t,editor:n})=>{const{href:i=""}=n.getAttributes("link"),c=await t.prompt({input:{label:"Link URL",rules:[$,F],initialValue:i,size:"sm",autofocus:!0}});if(c===void 0||c===!1)return;const u=n.chain().focus().extendMarkRange("link");c?u.setLink({href:c}).run():u.unsetLink().run()},floating:!0,extensions:[H.configure({openOnClick:!1,...s})]}),ce=(e,s)=>({key:"orderedList",icon:e.icon("editorformatListNumbered"),active:({editor:t})=>t.isActive("orderedList"),onClick:({editor:t})=>{t.chain().focus().toggleOrderedList().run()},floating:!0,extensions:[z.configure(s)]});function ue(e){return l=>({key:"textColor",icon:({editor:n})=>()=>{const c={color:n.getAttributes("textStyle").color};return o("span",{class:"v-wysiwyg-color-tool__button"},[o(P,{class:"v-wysiwyg-color-tool__button__icon",name:l.icon("editorTextColor")},null),o("span",{class:"v-wysiwyg-color-tool__button__bar",style:c},null)])},onClick:(n,i)=>{n.vui.menu({class:"v-wysiwyg-color-tool__menu",activator:i,content:c=>o("div",{class:["v-wysiwyg-color-tool__items",{"v-wysiwyg-color-tool__items--with-label":e.withLabel}]},[e.items.map((u,a)=>o("button",{key:u.key==null?a:u.key,class:"v-wysiwyg-color-tool__item",type:"button",onClick:()=>{const{color:r}=u;let d=n.editor.chain().focus();r?d=d.setColor(r):d=d.unsetColor(),d.run(),c.close()}},[o("span",{class:"v-wysiwyg-color-tool__item__color",style:u.color?{color:u.color}:{}},null),e.withLabel&&o("span",{class:"v-wysiwyg-color-tool__item__name"},[u.name])]))])})},floating:!0,extensions:[D,q]})}const b=[ee.configure({plugins:[oe(["abc","evidently"])]})],_=[ue({withLabel:!0,items:[{name:"\u30EA\u30BB\u30C3\u30C8",color:null},{name:"\u5F37\u8ABF\u8272",color:"var(--palette-error)"}]}),ne,ie,le,se,ce,re,ae];var he=N({setup(){const e=y(`
    <h2>
      Hi there,
    </h2>
    <p>
      this is a evidently basic <em>basic</em> example of <strong>tiptap</strong>. Sure, there are all kind of basic text styles you\u2019d probably expect from a text editor. But wait until you see the lists:
    </p>
    <ul>
      <li>
        That\u2019s a bullet list with one \u2026
      </li>
      <li>
        \u2026 or two list items.
      </li>
    </ul>
    <p>
      Isn\u2019t that great? And all of that is editable. But wait, there\u2019s more. Let\u2019s try a code block:
    </p>
<pre><code class="language-css">body {
  display: none;
}</code></pre>
    <p>
      I know, I know, this is impressive. It\u2019s only the tip of the iceberg though. Give it a try and click a little bit around. Don\u2019t forget to check the other examples too.
    </p>
    <blockquote>
      Wow, that\u2019s amazing. Good work, boy! \u{1F44F}
      <br />
      \u2014 Mom
    </blockquote>
    `),s=y("md"),l=y("flat"),t=y(!1),n=y(!1),i=y(!1),c=y(!1),u=y(!1);return{text1:e,size:s,variant:l,disabled:t,readonly:n,floating:i,disabledMinHeight:c,disabledMaxHeight:u}},render(){return o("div",{class:"pg-docs-components-wysiwygs"},[o(G,null,{default:()=>[g("Wysiwygs")]}),o(p,{title:"Basic"},{default:()=>[o("button",{type:"button",onClick:e=>{this.text1="\u3042\u3042\u3042"}},[g("xxxxx")]),o("button",{type:"button",onClick:e=>{console.log(e.pageY),this.$vui.menu({content:"xxx"})}},[g("menu")]),o(h,{label:"\u65E5\u672C\u8A9E",extensions:b,tools:_,modelValue:this.text1,"onUpdate:modelValue":e=>this.text1=e,counter:100,variant:"filled"},null),o("div",{class:"wysiwyg",style:{maxHeight:"200px",overflow:"auto"},innerHTML:this.text1},null)]}),o(p,{title:"Floating toolbar"},{default:()=>[o(h,{label:"\u65E5\u672C\u8A9E",extensions:b,tools:_,modelValue:this.text1,"onUpdate:modelValue":e=>this.text1=e,counter:100,variant:"filled",floatingToolbar:!0},null)]}),o(p,{title:"Styles"},{default:()=>[o("div",{class:"pg-columns"},[o("div",{class:"pg-columns__main"},[j.map(e=>o(h,{label:e,extensions:b,tools:_,required:!0,placeholder:"\u30D7\u30EC\u30FC\u30B9\u30DB\u30EB\u30C0\u30FC",hint:"\u3053\u308C\u306F\u5165\u529B\u30D2\u30F3\u30C8\u30C6\u30AD\u30B9\u30C8\u3067\u3059\u3002",counter:!0,maxlength:"100",size:this.size,floatingToolbar:this.floating,disabled:this.disabled,readonly:this.readonly,variant:e,disabledMinHeight:this.disabledMinHeight,disabledMaxHeight:this.disabledMaxHeight},null))]),o("div",{class:"pg-columns__sub"},[o(J,{label:"size",size:"sm",modelValue:this.size,"onUpdate:modelValue":e=>this.size=e,items:K.map(e=>({value:e,label:e}))},null),o(f,{size:"sm",modelValue:this.disabled,"onUpdate:modelValue":e=>this.disabled=e},{default:()=>[g("Disabled")]}),o(f,{size:"sm",modelValue:this.readonly,"onUpdate:modelValue":e=>this.readonly=e},{default:()=>[g("Readonly")]}),o(f,{size:"sm",modelValue:this.floating,"onUpdate:modelValue":e=>this.floating=e},{default:()=>[g("Floating")]}),o(f,{size:"sm",modelValue:this.disabledMinHeight,"onUpdate:modelValue":e=>this.disabledMinHeight=e},{default:()=>[g("Disabled min height")]}),o(f,{size:"sm",modelValue:this.disabledMaxHeight,"onUpdate:modelValue":e=>this.disabledMaxHeight=e},{default:()=>[g("Disabled max height")]})])])]})])}});export{he as default};
